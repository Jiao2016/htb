<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        canvas{
            background-color: #ccc;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas width="800" height="400"></canvas>
</body>
<script>
    var canvas=document.querySelector("canvas");
    var cobj=canvas.getContext("2d");
    var ox,oy,ow,oh;
    var arr=[];
    canvas.onmousedown=function (e) {
        ox=e.offsetX;
        oy=e.offsetY;
        canvas.onmousemove=function (e) {
            ow=e.offsetX-ox;
            oh=e.offsetY-oy;
            cobj.clearRect(0,0,800,400);
            if(arr.length!=0){
                cobj.putImageData(arr[arr.length-1],0,0,0,0,800,400)
            }
            cobj.beginPath();
            cobj.rect(ox,oy,ow,oh);
            cobj.stroke();
        }
        canvas.onmouseup=function () {
            canvas.onmousemove=null;
            canvas.onmouseup=null;
            arr.push(cobj.getImageData(0,0,800,400))
        }
    }

</script>
</html>